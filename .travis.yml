language: python
matrix:
  include:
  - python: '2.7'
    env:                             CATEGORY="nightly"  EXTRAS="yes"
  - python: '3.4'
    env:                             CATEGORY="nightly"  EXTRAS="yes"
  - python: '3.5'
    env:                             CATEGORY="nightly"  EXTRAS="yes"
install:
- sudo apt-get update
#
# Setup miniconda and activate the testenv environment
#
- if [[ "$TRAVIS_PYTHON_VERSION" == "2.7" ]]; then
     wget https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh -O miniconda.sh;
  else
     wget https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh -O miniconda.sh;
  fi
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- hash -r
- conda create -f -y -n testenv python=${TRAVIS_PYTHON_VERSION}
- source activate testenv
#
# Install supporting packages
#
- if [ -n "${EXTRAS}" ]; then conda install -y --channel conda-forge pyomo.extras; fi
- if [ "${TRAVIS_PYTHON_VERSION}" = "2.6" ]; then pip install ordereddict; fi
- conda install -y --channel conda-forge glpk
- conda install -y --channel cachemeorg ipopt_bin
- pip install coverage
#
# Install PyUtilib and Pyomo (master branches)
#
- git clone https://github.com/PyUtilib/pyutilib.git
- cd pyutilib
- python setup.py develop
- cd ..
- git clone https://github.com/Pyomo/pyomo.git
- cd pyomo
- python setup.py develop
- cd ..
#
# Install this package
#
- which python
- python --version
- python setup.py develop
script:
- nosetests -x .
